function timeDifference(e){var t=(new Date).getTime(),o=6e4,n=60*o,a=24*n,i=30*a,r=365*a,l=t-1e3*e;return l<o?Math.round(l/1e3)+" seconds ago":l<n?Math.round(l/o)+" minutes ago":l<a?Math.round(l/n)+" hours ago":l<i?"~ "+Math.round(l/a)+" days ago":l<r?"~ "+Math.round(l/i)+" months ago":"~ "+Math.round(l/r)+" years ago"}function monthName(e){var t=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"];return t[e]}function formatHumanise(e){return Math.abs(Number(e))>=1e9?(Math.abs(Number(e))/1e9).toFixed(2)+"B":Math.abs(Number(e))>=1e6?(Math.abs(Number(e))/1e6).toFixed(2)+"M":Math.abs(Number(e))>=1e3?(Math.abs(Number(e))/1e3).toFixed(2)+"K":Math.abs(Number(e))}function setThemeDark(){document.body.classList.remove("body-theme-override-light"),document.body.classList.add("body-theme-override-dark"),localStorage.setItem("theme","dark")}function setThemeLight(){document.body.classList.remove("body-theme-override-dark"),document.body.classList.add("body-theme-override-light"),localStorage.setItem("theme","light")}function setMenuTriggers(){document.querySelectorAll(".menuTrigger").forEach(function(e){e.addEventListener("click",function(e){cpre=1,setTimeout(function(){cpre=0},1e3),e.currentTarget.classList.contains("open")?e.currentTarget.classList.remove("open"):e.currentTarget.classList.add("open")})}),document.querySelectorAll(".menu").forEach(function(e){e.addEventListener("click",function(e){e.currentTarget.parentNode.querySelectorAll(".menuTrigger")[0].classList.remove("open")})}),document.querySelectorAll(".btn-connect").forEach(function(e){e.addEventListener("click",onConnect)})}async function UIWorkingInit(e){e=!e||isNaN(e)?100:e,document.getElementById("loader").style.display="",document.getElementById("app").style.filter="blur(5px)",setTimeout(function(){document.getElementById("loader")&&(document.getElementById("loader").style.display="none"),document.getElementById("app")&&(document.getElementById("app").style.filter="blur(0px)")},e)}function fetchApplicationData(e){if(fetching=!0,!window.poolPayload)return permanentlyStop=!0,void window.notify("Failed fetching application data. Try reloading the page. If the error persists, try clearing the browser cache.","bad","Dismiss");window.selectedPool=window.selectedPool?window.selectedPool:String(window.poolPayload.tokens[0].tid),window.__pool={data:window.poolPayload,selected:window.selectedPool,selectedIndex:0,__proposalInspector:!1,__stakingSelection:!1,__depositSelection:window.poolPayload.depositTokens[0].name,applicationLanguage:window.applicationLanguage,page:!1},fetching=!1,makeHomePage(),wHist(),document.getElementById("app").classList.remove("-loading"),loadActivityFlag=!1}function makeChart(e){if(window.poolPayload&&window.selectedPool)var t=window.poolPayload.tokens;else if(!window.poolPayload||!window.selectedPool)return;var o=document.getElementById("graph");if(o.style.display="none",o){var n,a=document.getElementById("graphParent");o.innerHTML="",n=a.getBoundingClientRect().height>=.3*window.outerHeight&&window.outerWidth<=750?.3*window.outerHeight:500;var r=a.getBoundingClientRect().width,l=LightweightCharts.createChart(o,{width:r,height:n,priceScale:{borderVisible:!1},timeScale:{borderVisible:!1},grid:{horzLines:{visible:!1},vertLines:{visible:!1}},layout:{backgroundColor:"#ffffff00",textColor:"#6702FF",fontSize:14,fontFamily:"Montserrat"}});l.applyOptions({handleScroll:!1,handleScale:!1});var d=l.addAreaSeries({topColor:"#6702FF",bottomColor:"#6702FF00",lineColor:"#6702FF",lineWidth:2});chartData=Array();Date.now();var c=Math.round((new Date).getTime()/1e3);switch(window.graphFilter){case"7day":if(t[e]["7d-average"][0].time||isNaN(t[e]["7d-average"][0]))chartData=t[e]["24hr-average"];else for(i=0;i<t[e]["7d-average"].length;i++){var s=8640*(i+1),u=c-s,m=Number(t[e]["7d-average"][t[e]["7d-average"].length-(i+1)]);chartData.push({time:u,value:m})}break;case"24hr":default:if(t[e]["24hr-average"][0].time||isNaN(t[e]["24hr-average"][0]))chartData=t[e]["24hr-average"];else for(i=0;i<t[e]["24hr-average"].length;i++){var g=3600*(i+1);u=c-g,m=Number(t[e]["24hr-average"][t[e]["24hr-average"].length-(i+1)]);chartData.push({time:u,value:m})}}if(d.setData(chartData),l.timeScale().fitContent(),o.style.display="",window.dollarToERC20=t[e].value,document.querySelectorAll(".floating-tooltip-2").length<1){var p=document.createElement("div");p.className="floating-tooltip-2",a.append(p)}p=document.querySelectorAll(".floating-tooltip-2")[0];p.innerHTML=`<div class="badge"><img loading="lazy" class="token-icon-mini" src="${t[e].icon}"><div>1 ${t[e].tid} : USD</div></div>\n      <div style="font-size: 24px;padding: 0.5rem;">$${t[e]["24hr-average"][t[e]["24hr-average"].length-1].toFixed(2)}</div>\n      <div style="font-size: 11px;font-family: 'Montserrat';opacity: .5;">${new Date}</div>`,document.getElementById("explorePool")&&(document.getElementById("explorePool").querySelectorAll("span")[0].innerHTML=`${t[e].tid}`),l.subscribeCrosshairMove(function(n){if(void 0===n.point||!n.time||n.point.x<0||n.point.x>o.clientWidth||n.point.y<0||n.point.y>o.clientHeight)var a=t[e]["24hr-average"][t[e]["24hr-average"].length-1],i=new Date;else i=new Date(1e3*n.time),a=n.seriesPrices.get(d);p.innerHTML=`<div class="badge"><img class="token-icon-mini" src="${t[e].icon}"><div>1 ${t[e].tid} : USD</div></div>\n      <div style="font-size: 24px;padding: 0.5rem;">$${a.toFixed(2)}</div>\n      <div style="font-size: 11px;font-family: 'Montserrat';opacity: .5;">${i}</div>`})}document.getElementById("currentReceive")&&(document.getElementById("currentReceive").innerHTML=`<span><img loading="lazy" style="height:1.5rem" src="${t[e].icon}">&nbsp;${t[e].tid}</span>`),saniExc()}function makeHomePage(){new Vue({el:"#app",data:window.__pool,methods:{formatCurrency:function(e){return formatCurrency.format(e)},formatDollar:function(e){return formatDollar.format(e)},__ts:function(e){var t=new Date(1e3*e);return t=`${t.getFullYear()} ${monthName(t.getMonth())} ${t.getDate()} ${t.getHours()}.${t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes()}`,t},timeDifference:function(e){return timeDifference(e)},formatInt:function(e){return formatInt.format(e)},formatHumanise:function(e){return formatHumanise(e)}}}),selectPool(window.selectedPool,0)}function selectPool(e,t){window.selectedPool=e,window.selectedPoolIndex=t,window.__pool.selected=e,window.__pool.selectedIndex=t,makeChart(t)}function saniExc(){document.getElementById("dollarInput").value=200,window.dollarToERC20&&(document.getElementById("tokenInput").value=Number(200*window.dollarToERC20).toFixed(2))}function explorePool(e){e&&(window.selectedPool=e),window.location=`#explore=${window.selectedPool}`}function stakingManager(e){e||(window.location="#stake"),document.querySelectorAll(".data-explorer").forEach(function(e){e.classList.remove("build-in")}),document.getElementById("appMain")&&document.getElementById("appMain").classList.add("build-out"),document.getElementById("stakingManager")&&document.getElementById("stakingManager").classList.add("build-in")}function selectStakingPool(e,t){if(!t)return!1;window.currentStakingPool=t,window.__pool.__stakingSelection=t,document.getElementById("poolList2").querySelectorAll(".selected").forEach(function(e){e.classList.remove("selected")}),stakingManager()}function stakeCurrent(){!window.walletConnected&&window.notify("Link a wallet to the app to begin staking tokens.","bad","dismiss")}function governanceInspector(e){e||(window.location="#governance"),window.poolPayload&&document.getElementById("governanceInspector")&&(document.querySelectorAll(".data-explorer").forEach(function(e){e.classList.remove("build-in")}),document.getElementById("appMain")&&document.getElementById("appMain").classList.add("build-out"),document.getElementById("governanceInspector").classList.add("build-in"))}function inspectProposal(e){if(!e)return!1;if(e=Number(e),window.poolPayload&&window.poolPayload.governance.proposals&&document.getElementById("proposalInspector")){document.querySelectorAll(".data-explorer").forEach(function(e){e.classList.remove("build-in")}),document.getElementById("appMain")&&document.getElementById("appMain").classList.add("build-out"),document.getElementById("proposalInspector").classList.add("build-in"),window.__pool.__proposalInspector=e;window.poolPayload.governance.proposals.forEach(function(t){t.id&&t.id===e&&t})}}function openPageElement(){document.querySelectorAll(".data-explorer").forEach(function(e){e.classList.remove("build-in")}),window.pool.page="explorePool"}function closePageElement(e){window.__pool.page=!1,document.getElementById(e)?document.getElementById(e).classList.remove("build-in"):document.querySelectorAll(".data-explorer").forEach(function(e){e.classList.remove("build-in")}),document.getElementById("appMain")&&document.getElementById("appMain").classList.remove("build-out")}function wHist(){if(String(window.location.href).indexOf("#")>-1){var e=window.location.hash.split("#")[1].split("&"),t=e[0].split("="),o=String(e[0]).indexOf("=")>-1?e[0].split("=")[0]:e[0];if(o){switch(o){case"home":closePageElement();break;case"explore":window.selectedPool=t[1]&&window.poolPayload.tokens[t[1]]?t[1]:window.selectedPool?window.selectedPool:"error",openPageElement();break;case"manage":openPageElement();break;case"stake":stakingManager(!0);break;case"governance":governanceInspector(!0);break;case"inspect-proposal":inspectProposal(t[1]);break;default:closePageElement()}}}else closePageElement()}const formatDollar=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}),formatCurrency=new Intl.NumberFormat("en-GB",{minimumFractionDigits:2}),formatInt=new Intl.NumberFormat("en-GB");var theme,cpre,loadActivityFlag,permanentlyStop,fetching,wh,ww,chartData;switch(window.notify=function(e,t,o,n){var a=document.createElement("div");a.classList.add("notification");var i=document.createElement("div");i.classList.add("notification-payload"),t&&isNaN(t)&&t.length>2?a.classList.add(t):o=t;var r=document.createElement("i");switch(r.classList.add("fas"),t){case"bad":r.classList.add("fa-times");break;case"good":r.classList.add("fa-check");break;case"warn":r.classList.add("fa-exclamation");break;default:r.classList.add("fa-info")}i.append(r);var l=document.createElement("span");if(l.innerHTML=e,i.append(l),t&&!o||!t&&!o||o&&isNaN(o)&&o.length>0){var d=document.createElement("button");d.setAttribute("onclick",`window.destroyNotification(this);${n}`),d.innerHTML=o||"dismiss",i.append(d)}else(o||!t||isNaN(t))&&isNaN(o)||(o=o<0?-1*o:o,o=o<100?1e3*o:o<1e3?1e3:o,setTimeout(function(){document.querySelectorAll(".notification").forEach(function(e){e.remove()})},o));a.append(i),document.body.append(a)},window.destroyNotification=function(e){e.parentNode.parentNode.remove()},!theme||theme.length<1?localStorage.getItem("theme")||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,localStorage.setItem("theme","dark")):localStorage.setItem("theme",theme),theme=localStorage.getItem("theme"),theme){case"auto":window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?setThemeDark():setThemeLight();break;case"dark":setThemeDark();break;case"light":setThemeLight();break;default:setThemeLight()}document.querySelectorAll(".menuTrigger").length>0&&setMenuTriggers(),Date.now||(Date.now=(()=>(new Date).getTime())),function(e){e.forEach(function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),fetchApplicationData(),wh=window.innerHeight,ww=window.innerWidth,window.onresize=function(){wh=window.innerHeight,ww=window.innerWidth,makeChart(window.selectedPoolIndex)},document.getElementById("dollarInput")&&(document.getElementById("dollarInput").addEventListener("input",function(e){if(window.dollarToERC20&&!isNaN(this.value)){var t=this.value*window.dollarToERC20;document.getElementById("tokenInput").value=Number(t).toFixed(2)}else this.value=200}),document.getElementById("tokenInput").addEventListener("input",function(e){if(window.dollarToERC20&&!isNaN(this.value)){var t=this.value*window.dollarToERC20;document.getElementById("dollarInput").value=t}else this.value=0}),saniExc()),document.querySelectorAll(".option-switch").forEach(function(e){Array.prototype.slice.call(e.children).forEach(function(e){e.addEventListener("click",function(e){Array.prototype.slice.call(e.currentTarget.parentNode.children).forEach(function(e){e.classList.remove("selected")}),e.currentTarget.classList.add("selected")})})}),Array.prototype.slice.call(document.getElementById("graphControls").children).forEach(function(e){e.addEventListener("click",function(e){window.graphFilter=e.currentTarget.getAttribute("filter"),makeChart(window.selectedPoolIndex)})}),UIWorkingInit(),document.getElementById("explorePool")&&(document.getElementById("explorePool").addEventListener("click",function(){explorePool()}),Array.prototype.slice.call(document.getElementById("exploreTabsControls").children).forEach(function(e){e.addEventListener("click",function(e){var t=!!e.currentTarget.hasAttribute("filter")&&e.currentTarget.getAttribute("filter");document.getElementById("explorePayloads").querySelectorAll("div").forEach(function(e){e.hasAttribute("filter")&&(e.getAttribute("filter")==t?e.style.display="flex":e.style.display="none")})})})),document.getElementById("homeTrigger")&&document.getElementById("homeTrigger").addEventListener("click",function(e){window.location="#home"}),window.addEventListener("popstate",function(e){wHist()});